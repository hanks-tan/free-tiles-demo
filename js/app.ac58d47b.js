(function(e){function t(t){for(var a,n,s=t[0],c=t[1],l=t[2],u=0,m=[];u<s.length;u++)n=s[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);p&&p(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,s=1;s<r.length;s++){var c=r[s];0!==i[c]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=r[0]))}return e}var a={},i={app:0},o=[];function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var p=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"3a10":function(e,t,r){},"3c221":function(e,t,r){},4087:function(e,t,r){"use strict";r("3c221")},"56d7":function(e,t,r){"use strict";r.r(t);var a=r("a026"),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("MapView")],1)},o=[],n=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"layer-switch"},[t("div",{staticClass:"sw"},[t("i",{staticClass:"iconfont",class:{"icon-arrow-up-bold":e.showLayerSwitch,"icon-arrow-down":!e.showLayerSwitch},on:{click:function(t){e.showLayerSwitch=!e.showLayerSwitch}}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showLayerSwitch,expression:"showLayerSwitch"}],staticClass:"main"},e._l(e.tileList,(function(r,a){return t("div",{key:r.code,staticClass:"layer-item",class:{"layer-item-last":a===e.tileList.length-1,"is-vec":"3857"===r.projection},on:{click:function(t){return e.changeBaseLayer(r)}}},[e._v(" "+e._s(r.name)+" ")])})),0)]),t("div",{staticClass:"map",attrs:{id:"map"}})])},s=[],c=r("5eee"),l=r("a2c7"),p=r("480c"),u=r("2ef1"),m=r("78db2"),d=r("97e6"),w=r("fdb7"),y=(r("caad"),r("83a6")),h=r("8682"),f=r("ce2c"),b=r("6cbf"),v=r("6c77");const x=e=>new y["a"](e),g=e=>new h["a"](e),j=e=>new f["a"]({radius:e.radius,fill:x(e.fill),stroke:g(e.stroke)}),z=(e,t)=>{switch(e){case"fill":return new y["a"](t);case"stroke":return new h["a"](t);case"circle":return new j(t);case"icon":return new b["a"](t);default:break}},S=e=>new v["b"](e),k=e=>{const t={};return Object.keys(e).forEach(r=>{const a=e[r];t[r]=_(a)}),t},_=e=>{const t={};return Object.keys(e).forEach(r=>{const a=e[r],i=z(r,a);if(i){let e=["circle","icon"].includes(r)?"image":r;t[e]=i}}),S(t)},V={Land:{fill:{color:"#fff"},stroke:{color:"#000",width:1}},"Boundary line":{stroke:{color:"#ccc"}},"Marine area":{fill:{color:"#b0e1ff"}},Road:{stroke:{color:"#ccc",width:1}},"Water area":{fill:{color:"#b0e1ff"}}};var T=r("78db"),O=r("256f"),G=r("9656"),M=r("a79f"),L=r("bc81");function E(){M["a"].defs("EPSG:4490","+proj=longlat +ellps=GRS80 +no_defs"),Object(L["a"])(M["a"]);const e=new O["b"]({code:"EPSG:4490",units:"degrees",axisOrientation:"neu"});return e.setExtent([-180,-90,180,90]),e.setWorldExtent([-180,-90,180,90]),Object(O["e"])(e),e}function I(e,t){return function(r){let a=`${e}?access_token=${t}`;return a.replace("{z}",String(2*r[0]-1)).replace("{x}",String(r[1])).replace("{y}",String(r[2])).replace("{a-d}","abcd".substr(((r[1]<<r[0])+r[2])%4,1))}}const P=E(),C=k(V);var Y={data(){return{map:null,view:null,center:[113,32],tileList:[{code:"geoq_",name:"智图暖色版",url:"https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}",type:"xyz"},{code:"geoq_dark",name:"智图深色版",url:"https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}",type:"xyz"},{code:"geoq_Gray",name:"智图灰色版",url:"https://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetGray/MapServer/tile/{z}/{y}/{x}",type:"xyz"},{code:"esri_raster",name:"arcgis影像",url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",type:"xyz"},{code:"esri_elevation",name:"arcgis地形",url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer/tile/{z}/{y}/{x}",type:"xyz"},{code:"esri_elevation_Dark",name:"arcgi黑色地形",url:"http://server.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer/tile/{z}/{y}/{x}",type:"xyz"},{code:"esri_Dark",name:"arcgi黑色矢量",url:" http://server.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",type:"xyz"},{code:"weather",name:"weather网站底图",url:"https://tiles.windy.com/tiles/v9.0/darkmap/{z}/{x}/{y}.png",type:"xyz"},{code:"maptiler",name:"maptiler地图(需要key)",url:"https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=get_your_own_D6rA4zTHduk6KOKTXzGB",type:"xyz",projection:"3857"},{code:"gaode",name:"高德",url:"http://wprd0{1-4}.is.autonavi.com/appmaptile?x={x}&y={y}&z={z}&lang=zh_cn&size=1&scl=1&style=7",type:"xyz",projection:"4326"},{code:"gaode-raster",name:"高德卫星图",url:"http://webst04.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",type:"xyz",projection:"4326"},{code:"esri-vectortile",name:"arcgis矢量瓦片自定义样式",url:"https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer/tile/{z}/{y}/{x}.pbf",type:"vector",projection:"3857"},{code:"mapbox-vectortile",name:"mapbox矢量瓦片自定义样式",url:"https://api.mapbox.com/v4/mapbox.mapbox-streets-v8,mapbox.mapbox-terrain-v2/{z}/{x}/{y}.vector.pbf",type:"vector",source:"mapbox",token:"sk.eyJ1IjoiaGlrZXI3IiwiYSI6ImNsNjF2cGVueTA1NjMzYmx2YTF1cXQ4Ym4ifQ.lq1lAwf2Filwm4E_9mykmg",projection:"3857",mark:"mapbox免费账号一天50000瓦片的限制，mapbox样式中文问题，可用再mapbox studio中修改样式来解决, 字体用name_zh_Hans"},{code:"mapbox-raster",name:"mapbox卫星影像",url:"https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.webp",type:"raster",source:"mapbox",token:"sk.eyJ1IjoiaGlrZXI3IiwiYSI6ImNsNjF2cGVueTA1NjMzYmx2YTF1cXQ4Ym4ifQ.lq1lAwf2Filwm4E_9mykmg",projection:"3857"},{code:"tianidtu-vectortile",name:"天地图矢量瓦片自定义样式",url:"https://tile1.tianditu.gov.cn/vts?t=vt&z={z}&x={x}&y={y}&tk=50cc4fa9dbbc4f3ca63d8db04f0aee7f",type:"vector",source:"tianditu",projection:"4490",mark:"mapbox免费账号一天50000瓦片的限制"}],showLayerSwitch:!1}},mounted(){this.init()},methods:{init(){this.view=this.createView("4326",this.center);const e=this.createXYZTileLayer(this.tileList[0].url);this.map=new c["a"]({target:"map",view:this.view,layers:[e]}),this.baseLayer=e},createView(e,t=[0,0]){const r=new l["a"]({projection:"EPSG:"+e,center:t,zoom:7,minZoom:1,maxZoom:20});return r},createXYZTileLayer(e){const t=new u["a"]({url:e}),r=new p["a"]({source:t});return r},changeBaseLayer(e){let t;t="xyz"===e.type?this.createXYZTileLayer(e.url):"mapbox"===e.source?"vector"===e.type?this.createMapboxVectorTile(e):this.createMapboxRaster(e):"tianditu"===e.source?this.createTdtVectorTile(e):this.createVectorTile(e.url),this.map.removeLayer(this.baseLayer),this.updateView(e.projection),this.map.addLayer(t),this.baseLayer=t},createVectorTile(e){const t=new d["a"]({source:new m["a"]({format:new w["a"],url:e,projection:"EPSG:4326"}),style:function(e){const t=e.get("layer");return C[t]}});return t},createMapboxVectorTile(e){const t=[];for(let a=0;a<=22;++a)t.push(156543.03392804097/Math.pow(2,2*a));const r=new d["a"]({source:new m["a"]({format:new w["a"],tileGrid:new T["a"]({extent:Object(O["n"])("EPSG:3857").getExtent(),resolutions:t,tileSize:512}),tileUrlFunction:I(e.url,e.token)})});return Object(G["a"])(r,"mapbox://styles/hiker7/cl639a0z9001v14o6tz08tix0","",{accessToken:e.token}),r},createMapboxRaster(e){const t=[];for(let a=0;a<=25;++a)t.push(156543.03392804097/Math.pow(2,2*a));const r=new p["a"]({source:new u["a"]({tileGrid:new T["a"]({extent:Object(O["n"])("EPSG:3857").getExtent(),resolutions:t,tileSize:512}),tileUrlFunction:I(e.url,e.token)})});return r},createTdtVectorTile(e){var t=360/512;const r=[];for(let o=0;o<=8;++o)r.push(t/Math.pow(2,2*o));const a=e.url,i=new d["a"]({source:new m["a"]({format:new w["a"],tileGrid:new T["a"]({extent:P.getExtent(),resolutions:r,tileSize:512}),projection:P,url:a}),style:e=>{"Point"===e.getType()&&console.log(e.getProperties())}});return i},updateView(e){e||(e="4326");const t=this.map.getView(),r=t.getProjection().getCode();r!=="EPSG:"+e&&("3857"===e?this.updateViewTo3857(e):"4490"===e?this.updateViewTo4490():this.updateViewTo4326())},updateViewTo3857(){const e=this.map.getView().getCenter(),t=Object(O["j"])(e),r=this.createView("3857",t);this.map.setView(r)},updateViewTo4326(){const e=this.map.getView().getCenter(),t=this.createView("4326",Object(O["s"])(e));this.map.setView(t)},updateViewTo4490(){const e=this.map.getView().getCenter(),t=this.createView("4490",Object(O["s"])(e));this.map.setView(t)},load(){const e={token:"sk.eyJ1IjoiaGlrZXI3IiwiYSI6ImNsNjF2cGVueTA1NjMzYmx2YTF1cXQ4Ym4ifQ.lq1lAwf2Filwm4E_9mykmg",url:"https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.webp"},t=[];for(let n=0;n<=8;++n)t.push(156543.03392804097/Math.pow(2,2*n));const r=e.token,a=e.url;function i(e){let t=`${a}?access_token=${r}`;return t.replace("{z}",String(2*e[0]-1)).replace("{x}",String(e[1])).replace("{y}",String(e[2])).replace("{a-d}","abcd".substr(((e[1]<<e[0])+e[2])%4,1))}const o=new p["a"]({source:new u["a"]({tileGrid:new T["a"]({extent:Object(O["n"])("EPSG:3857").getExtent(),resolutions:t,tileSize:512}),tileUrlFunction:i})});return this.map=new c["a"]({target:"map",view:this.createView("3857",Object(O["j"])(this.center)),layers:[o]}),this.baseLayer=o,o}}},F=Y,A=(r("4087"),r("2877")),N=Object(A["a"])(F,n,s,!1,null,"a587681e",null),X=N.exports,q={name:"App",components:{MapView:X}},Z=q,B=(r("5970"),Object(A["a"])(Z,i,o,!1,null,null,null)),W=B.exports;r("5bc0"),r("3a10");a["a"].config.productionTip=!1,new a["a"]({render:e=>e(W)}).$mount("#app")},5970:function(e,t,r){"use strict";r("7646")},7646:function(e,t,r){}});